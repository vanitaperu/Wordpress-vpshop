(($,t,c)=>{"use strict";const e=async e=>{const a=async(e,a)=>{const s=new FormData(e[0]);s.set("action","builder_contact_send"),s.set("post_id",e.data("post-id")),s.set("orig_id",e.data("orig-id")),s.set("element_id",e.data("element-id")),a&&s.set("g-recaptcha-response",a);try{const a=await t.fetch(s),i=a.data,n=e.find(".contact-message");a.success?(n.html('<p class="ui light-green contact-success">'+i.msg+"</p>").fadeIn(),t.trigger("builder_contact_message_sent",[e,i.msg]),""!==i.redirect_url&&(i.nw?setTimeout((()=>{c.open(i.redirect_url,"_blank")}),2e3):c.location=i.redirect_url),e[0].reset()):(n.html('<p class="ui red contact-error">'+i.error+"</p>").fadeIn(),t.trigger("builder_contact_message_failed",[e,i.error]))}catch(t){}$("html").stop().animate({scrollTop:e.offset().top-100},500,"swing"),"v2"===i?.dataset.ver&&grecaptcha?.reset(),e.removeClass("sending")},i=e.tfClass("themify_captcha_field")[0];e.tfClass("builder-contact-date-field");if(i)if(i.classList.contains("h-captcha"))void 0===window.hcaptcha&&t.loadJs("https://js.hcaptcha.com/1/api.js?recaptchacompat=off",null,!1);else if("undefined"==typeof grecaptcha){let c="https://www.google.com/recaptcha/api.js";"v3"===i.dataset.ver&&(c+="?render="+i.dataset.sitekey),t.loadJs(c,null,!1)}t.is_builder_active||e.tfOn("submit",(function(t){t.preventDefault();const c=$(this),i=this.classList,s=e.tfClass("themify_captcha_field")[0];if(i.contains("sending"))return!1;i.add("sending"),c.find(".contact-message").fadeOut(),"v3"===s?.dataset.ver?grecaptcha?.ready((async()=>{const t=await grecaptcha.execute(s.dataset.sitekey,{action:"captcha"});a(c,t)})):a(c)}))};t.on("builder_load_module_partial",((c,a)=>{if(!0!==a||c.classList.contains("module-contact"))for(let a=t.selectWithParent("builder-contact",c),i=a.length-1;i>-1;--i)t.requestIdleCallback((()=>{e(a[i])}),300)}))})(jQuery,Themify,window.top);