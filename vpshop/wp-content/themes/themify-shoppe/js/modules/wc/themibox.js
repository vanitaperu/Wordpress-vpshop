(($,t,i)=>{"use strict";let e,o,n,s=i.createElement("div"),p=i.createElement("div"),c=s.classList,h=p.classList;const r=i.createElement("div"),f=themify_vars.theme_v,a=themifyScript.wc_css_url,l=t=>{27===t.keyCode&&m(t)},d=()=>{const e=i.tfId("themify_concate-css")?.nextElementSibling,o=themifyScript.wc_gal,n=[];if(i.body.classList.contains("product-single")||n.push(t.loadCss(a+"single/product","theme_single_product",f,e)),n.push(t.loadCss(a+"lightbox","theme_lightbox",f)),0===i.tfClass("woocommerce-breadcrumb").length&&n.push(t.loadCss(a+"breadcrumb","theme_breadcrumb",f,e)),o)for(let i in o){let e=!1;"flexslider"===i||"zoom"===i?e=void 0!==$[i]:"photoswipe"===i?e="undefined"!=typeof PhotoSwipe:"photoswipe-ui-default"===i&&(e="undefined"!=typeof PhotoSwipeUI_Default),n.push(t.loadJs(o[i].s,e,o[i].v))}return Promise.all(n)},m=f=>{"keyup"!==f.type&&f.preventDefault(),e&&(r.tfOn("transitionend",(function(){const r=()=>{c.add("tf_hide"),p.innerHTML="",t.trigger("themiboxclosed"),i.body.classList.remove("post-lightbox"),i.tfOff("keyup",l,{passive:!0}),e=o=n=null};if(i.body.classList.remove("post-lightbox"),c.contains("lightbox-message"))c.remove("lightbox-message"),s.tfOn("transitionend",(function(){this.style.top="",r()}),{passive:!0,once:!0}).style.top="150%";else{c.add("lightbox_closing","post-lightbox-prepare");const t=n.getBoundingClientRect();s.tfOn("transitionend",(function(){o.style.display="",h.remove("tf_hidden"),p.style.transition="",this.tfOn("transitionend",(function(){this.classList.remove("post-lightbox-prepare","lightbox_closing"),r()}),{passive:!0,once:!0}).style.top=t.top+t.height/2+"px",this.style.left=t.left+t.width/2+"px"}),{passive:!0,once:!0}),p.style.transition="none",h.add("tf_hidden");for(let t=p.children,i=t.length-1;i>-1;--i)o!==t[i]&&t[i].remove();s.style.width=t.width+"px",s.style.height=t.height+"px"}this.classList.add("tf_hide")}),{passive:!0,once:!0}),r.classList.add("tf_opacity"))},_=function(_){if(_.preventDefault(),e)return!1;if(e=this,t.wc(!0),n=e.closest(".product,.slide-inner-wrap,.type-product"),n){const t=n.querySelector(".product-image,.post-image");n=t||n.tfTag("img")[0]}if(!n)return!1;c.add("woocommerce","woo_qty_btn","post-lightbox-prepare","tf_hide");let x=e.href,u="IMG"===n.tagName?n:n.tfTag("img")[0];themify_vars.wc_js||(x=t.updateQueryString("load_wc","1",x)),u=u?u.src:e.dataset.image,u||(u=themifyScript.placeholder),o=new Image,o.src=u;const b=n.getBoundingClientRect(),g=t.fetch("","html",{method:"GET"},t.updateQueryString("post_in_lightbox","1",x)),y=s.style;y.width=b.width+"px",y.height=b.height+"px",y.top=b.top+b.height/2+"px",y.left=b.left+b.width/2+"px",Promise.all([o.decode(),d()]).then((()=>{p.appendChild(o),r.classList.remove("tf_hide"),c.remove("tf_hide"),setTimeout((()=>{s.tfOn("transitionend",(()=>{i.body.classList.add("post-lightbox"),r.classList.remove("tf_opacity"),h.add("post-lightbox-flip-infinite"),g.then((e=>{t.on("single_slider_loaded",(()=>{setTimeout((()=>{p.tfOn("animationiteration",(function(){this.classList.remove("post-lightbox-flip-infinite"),s.tfOn("transitionend",(()=>{if(s=n,p=r,h=p.classList,c=s.classList,s.style.top=n.style.left="",c.remove("tf_opacity"),s.previousSibling.remove(),s.style.transition="none",s.style.width=s.style.height=p.style.transition="","function"==typeof ThemifyShoppeAjaxCart){const t=p.querySelector("form.cart");t&&t.tfOn("submit",ThemifyShoppeAjaxCart)}n=r=null,h.remove("tf_opacity"),i.tfOn("keyup",l,{passive:!0}),setTimeout((()=>{s.style.transition="",s.lastElementChild.tfOn("click",m,{once:!0})}),10)}),{once:!0,passive:!0}).style.transition="",p.style.transition="none",h.add("tf_opacity"),c.remove("post-lightbox-prepare"),s.style.width=n.clientWidth+"px",s.style.height=n.clientHeight+"px"}),{passive:!0,once:!0})}),15)}),!0);let n=s.cloneNode(!0),r=n.firstChild;r.style.transition=n.style.transition="none",r.classList.remove("post-lightbox-flip-infinite"),n.classList.remove("post-lightbox-prepare"),n.classList.add("tf_opacity"),n.style.top=n.style.left="-1000vh",n.style.width=n.style.height="",o=r.tfTag("img")[0],o.style.display="none",r.appendChild(e),s.after(n),t.fonts(r);let d=i.tfClass("pswp")[0];if(d||(d=r.tfClass("pswp")[0],d&&i.body.prepend(d)),r.tfClass("share-wrap")[0]){let e=i.tfId("themify_concate-css");e&&(e=e.nextElementSibling),t.loadCss(a+"social-share","theme_social_share",f,e)}t.trigger("themiboxloaded",r),t.wc(!0)}))}),{once:!0,passive:!0}),s.style.height="",s.style.width=(b.width>180?180:b.width)+"px",s.style.top=s.style.left=""}),15)}))};t.on("themify_theme_themibox_run",(o=>{const n=i.createDocumentFragment(),h=i.createElement("a");s.id="post-lightbox-wrap",s.className="tf_scrollbar tf_box tf_hide",r.id="pattern",r.tfOn("click",m).className="tf_opacity tf_hide tf_w tf_h",p.id="post-lightbox-container",p.className="tf_box tf_w tf_h tf_overflow",h.className="close-lightbox tf_close",h.href="#",s.append(p,h),n.append(s,r),t.body.on("click",".themify-lightbox",_).on("added_to_cart",(()=>{e&&(c.add("lightbox-message"),s.tfOn("transitionend",(function(){this.style.padding="",p.appendChild((()=>{const e=i.createElement("div"),o=i.createElement("h3"),n=i.createElement("a"),s=i.createElement("a");return e.className="tf_textc lightbox-added",o.textContent=themifyScript.lng.add_to,n.className="button outline",n.textContent=themifyScript.lng.keep_shop,n.tfOn("click",m,{once:!0}).href="#",s.href=themifyScript.checkout_url,s.className="button checkout",s.textContent=themifyScript.lng.checkout,e.append(o,n,s),i.body.classList.contains("woocommerce-cart")&&t.on("themiboxclosed",(()=>{window.location.reload()}),!0),e})()),this.tfOn("transitionend",(function(){this.style.maxHeight=""}),{passive:!0,once:!0}),this.style.maxHeight="100%"}),{passive:!0,once:!0}),p.innerHTML="",s.style.padding=s.style.maxHeight="0px")}))[0].appendChild(n),o.click()}),!0)})(jQuery,Themify,document);