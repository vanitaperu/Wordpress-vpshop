((t,e,i,r)=>{"use strict";let s,l=!1,o=t.w,n=t.h,c=!1;const a=new Map,f="m"===r.is_sticky&&~~themify_vars.breakpoints.tablet[1],_=t=>{!0!==l&&requestAnimationFrame((()=>{const e=i.scrollY,r=t||a;for(let t of r){let i=t[0],r=t[1],s=i.classList.contains("tb_sticky_scroll_active");if("disable"!==r)if(!0===r.isBottom&&e+n>=r.space||!0!==r.isBottom&&e>r.space){let t=i.style;if(!1===s&&(i.parentNode.style.height=r.h+"px",t.position="fixed",t.top=r.value,t.width=r.w+"px",i.classList.add("tb_sticky_scroll_active")),r.unstick&&r.unstick.item){let e,s=r.unstick,l=parseInt(r.value),o=s.item.getBoundingClientRect();"builder"===s.type?e=o.bottom-r.h-l:(e="passes"===s.r?o.bottom-l:o.top-r.h-l,"top"!==s.cur&&"bottom"!==s.cur||(e+=s.v,"bottom"===s.cur&&(e-=n))),e=e<0?e+l+"px":r.value,r.currentTop!==e&&(r.currentTop=e,a.set(i,r),t.top=e)}}else!0===s&&b(i)}}))},b=t=>{const e=t.style;e.width=e.top=e.bottom=e.position=t.parentNode.style.height="",t.classList.remove("tb_sticky_scroll_active")},p=new MutationObserver((e=>{if(e[0]){let i=e[0].target.closest("[data-sticky-active]");i&&(cancelAnimationFrame(s),s=requestAnimationFrame((()=>{t.imagesLoad(i).then((t=>{const e=new Map;b(t),d(t),e.set(t,a.get(t)),_(e),s=null}))})))}})),d=(t,r,s)=>{const l=t.classList.contains("tb_sticky_scroll_active");if(!1===l||!0===s){if(!a.has(t)||!0===s){const i=(t=>{let e=!1,i=themify_vars?.breakpoints||{};for(let r=Object.keys(i),s=r.length-1;s>-1;--s){let l=r[s],n="tablet_landscape"===l?"tl":l[0];if(void 0!==t[n]&&("mobile"!==l?i[l][1]:i[l])>=o){e=t[n];break}}return!1===e&&(e=t.d),e})(JSON.parse(t.dataset.stickyActive));if(!i)return a.set(t,"disable"),void b(t);const r=i.stick||{},s=r.v?parseInt(r.v):0,l=i.unstick,n=r.u||"px";if("px"!==n?i.u=n:i.value=s+n,i.v=s,"bottom"===r.p&&(i.isBottom=!0),l){let i,r=t.closest(".themify_builder_content");if("builder"===l.type){let t=r.closest("#tbp_header");t&&(t=e.tfId("tbp_content")?.tfClass("themify_builder_content")[0]||e.tfClass("themify_builder_content")[1],t&&(r=t)),i=r}else"row"===l.type&&(i=r.tfClass("tb_"+l.el)[0]),i??=r.tfClass("tb_"+l.el)[0],i&&(l.v=parseInt(l.v));i&&(l.item=i)}if(!t.parentNode.classList.contains("tb_sticky_wrapper")){const i=e.createElement("div");i.className="tb_sticky_wrapper",t.before(i),i.appendChild(t)}a.set(t,i)}const c=a.get(t);if("disable"===c)return;let f="",_=c.v;!0===l&&(t.style.position="",f=t.style.top,t.style.top=""),r||(t.style.width="",r=t.getBoundingClientRect()),c.w=r.width>0?r.width:t.offsetWidth,c.h=r.height>0?r.height:t.offsetHeight,"%"===c.u&&0!==_&&(_=_/100*n),!0===c.isBottom&&(_=n-_-c.h),c.value=_+"px",c.space=void 0!==c.isBottom?r.bottom+i.pageYOffset+_:r.top+i.pageYOffset-_,c.t=r.top,t.parentNode.style.height!==c.h+"px"&&(t.parentNode.style.height=c.h+"px"),!0===l&&(t.style.position="fixed",t.style.top=f),a.set(t,c)}},m=new IntersectionObserver((t=>{for(let e=t.length-1;e>-1;--e)!0===t[e].isIntersecting&&d(t[e].target,t[e].boundingClientRect)}),{threshold:[.3,.4,.5,.6,.7,.8,.9,1]});t.on("tb_sticky_init",(t=>{for(let e=t.length-1;e>-1;--e)m.observe(t[e]),p.observe(t[e],{subtree:!0,childList:!0});if(!1===c){if(c=!0,i.scrollY>0){for(let e=t.length-1;e>-1;--e)d(t[e],t[e].getBoundingClientRect());_()}i.tfOn("scroll",(()=>{_()}),{passive:!0})}})).on("tfsmartresize",(t=>{if(t){o=t.w,n=t.h,l=!!(f&&f>=o);for(let t of a)!0===l?b(t[0]):d(t[0],null,!0);!1===l&&_()}}))})(Themify,document,window,tbLocalScript);