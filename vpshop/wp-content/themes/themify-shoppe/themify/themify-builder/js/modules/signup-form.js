((t,i,a)=>{"use strict";function c(c){const n=c.tfClass("themify_captcha_field")[0];if(c.tfOn("submit",(async o=>{if(o.preventDefault(),!c.classList.contains("tb_waiting")){const s=c.querySelector('button[name="tb_submit"]'),e=c.tfClass("tb_signup_errors")[0],r=c.tfClass("tb_signup_success")[0],p=async()=>{const n=new FormData(c);n.append("action","tb_signup_process");const o=await t.fetch(n);if(!o.success)throw Error(o.data);if(r&&(r.style.display="block"),c.dataset.redirect!==a){const t=new URL(""===c.dataset.redirect?i.location.href:c.dataset.redirect);t.searchParams.set("user_id",o.data.user_id),i.location.href=""+t}};s.disabled=!0,e.replaceChildren(),r&&(r.style.display="none"),c.classList.add("tb_waiting");try{if("v3"===n?.dataset.ver&&i.grecaptcha!==a){const t=await new Promise(((t,a)=>{i.grecaptcha.ready((()=>{i.grecaptcha.execute(n.dataset.sitekey,{action:"captcha"}).then(t).catch(a)}))})),a=document.createElement("input");a.type="hidden",a.name="g-recaptcha-response",a.value=t,c.prepend(a)}await p()}catch(o){e.innerHTML=o.message||c.dataset.genericError}s.disabled=!1,c.classList.remove("tb_waiting")}})),n)if(n.classList.contains("h-captcha"))i.hcaptcha===a&&t.loadJs("https://js.hcaptcha.com/1/api.js?recaptchacompat=off",null,!1);else if(i.grecaptcha===a){let i="https://www.google.com/recaptcha/api.js";"v3"===n.dataset.ver&&(i+="?render="+n.dataset.sitekey),t.loadJs(i,null,!1)}}t.on("builder_load_module_partial",((i,a)=>{if(!0!==a||i.classList.contains("module-signup-form"))for(let a=t.selectWithParent("tb_signup_form",i),n=a.length-1;n>-1;--n)c(a[n])}))})(Themify,window,void 0);