(($,t,c,a)=>{"use strict";const e=e=>{const o=e.tfClass("themify_captcha_field")[0];if(o)if(o.classList.contains("h-captcha"))c.hcaptcha===a&&t.loadJs("https://js.hcaptcha.com/1/api.js?recaptchacompat=off",null,!1);else if(c.grecaptcha===a){let c="https://www.google.com/recaptcha/api.js";"v3"===o.dataset.ver&&(c+="?render="+o.dataset.sitekey),t.loadJs(c,null,!1)}(e=>{t.is_builder_active||e.tfOn("submit",(async o=>{o.preventDefault();const s=o.currentTarget;if(!s.classList.contains("processing")){s.className+=" processing";try{const o=e.tfClass("themify_captcha_field")[0];if("v3"===o?.dataset.ver&&c.grecaptcha!==a){const t=await new Promise(((t,a)=>{c.grecaptcha.ready((()=>{c.grecaptcha.execute(o.dataset.sitekey,{action:"captcha"}).then(t).catch(a)}))})),a=document.createElement("input");a.type="hidden",a.name="g-recaptcha-response",a.value=t,s.prepend(a)}await(async a=>{const e=new FormData(a),o=a.querySelector('[name="g-recaptcha-response"]');null!==o&&e.set("contact-recaptcha",o.value);const s=await t.fetch(e);if(!s.success)throw s.data.error;"s1"===a.dataset.success?c.location.href=s.data.redirect:$(a).fadeOut().closest(".module").find(".tb_optin_success_message").fadeIn()})(s)}catch(o){console.error(o)}s.classList.remove("processing"),"v2"===cp?.dataset.ver&&c.grecaptcha?.reset()}}))})(e)};t.on("builder_load_module_partial",((c,a)=>{if(!0===a&&!c.classList.contains("module-optin"))return;const o=t.selectWithParent("tb_optin_form",c)[0];o&&t.requestIdleCallback((()=>{e(o)}),300)}))})(jQuery,Themify,window,void 0);