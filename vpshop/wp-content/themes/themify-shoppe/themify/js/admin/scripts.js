((e,$,t,i)=>{"use strict";var n=e=>{var t=i.createElement("textarea");return t.innerHTML=e,t.innerText};function a(){return e.loadJs("https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js",!!window.JSZip,!1)}$.expr.pseudos.icontains=(e,t,i)=>$(e).text().toUpperCase().indexOf(i[3].toUpperCase())>=0,$((function(){var s,o=$("body"),c=$("#themify"),l=$("#setting>.subtabnav"),r=$("#themify_404_page_autocomplete");if(c.find(".maintab").not('[aria-expanded="false"]').each((function(){$(this).find(".subtab").css("minHeight",$(this).find(".subtabnav").outerHeight())})),r.length>0){var h={},f=r.closest(".themify_404_autocomplete_wrap");r.autocomplete({minLength:2,autoFocus:!0,classes:{"ui-autocomplete":"highlight"},source(e,t){var i=e.term;if(f.addClass("themify_autocomplete_run"),i in h)return t(h[i]),void f.removeClass("themify_autocomplete_run");$.ajax({url:ajaxurl,dataType:"json",type:"POST",data:{term:i,action:"themify_get_404_pages"},success(e){for(const t in e)e[t].label=n(e[t].label);h[i]=e,t(e.length?e:[themify_js_vars.page_not_found]),f.removeClass("themify_autocomplete_run")}})},select(e,t){e.preventDefault(),t.item.value!==themify_js_vars.page_not_found&&r.val(t.item.label).next('input[type="hidden"]').val(t.item.value)},change(e,t){t.item||e.target.value||r.next('input[type="hidden"]').val("")}}).focus((function(){$(this).autocomplete("search")}))}l.length>0&&(s=l.offset().top-32);var d=!1,_=function(e,i){$(".search-setting-holder .clear-search").trigger("click");var n="tabscreate"===e.type?t.location:i.newTab.find("a")[0];if(history.replaceState(null,null,n.hash||null),"tabscreate"===e.type&&!d){d=!0;var a=$("#themify div#setting div.subtab");a.each((function(){var e=$(this).find("fieldset");e.length>2?e.children(".themify_panel_fieldset_wrap").hide():e.find("legend").addClass("themify_panel_fieldset_nocollapse")})),a.find("legend:not(.themify_panel_fieldset_nocollapse)").on("click",(function(){var e=$(this),t=e.children("i");t.hasClass("tf_plus_icon")?e.siblings().slideDown("fast",(function(){if(this.tfClass("CodeMirror").length<1){const e=this.tfClass("tf_code_editor");for(let t=e.length-1;t>-1;--t)z(e[t])}t.removeClass("tf_plus_icon").addClass("ti-minus")})):e.siblings().slideUp("fast",(()=>{t.removeClass("ti-minus").addClass("tf_plus_icon")}))}))}};$(".maintab, #content").tabs({fx:{opacity:"toggle",duration:200},cache:!0,select(){$(this).css({height:$(this).height(),overflow:"hidden"})},show(){$(this).css({height:"auto",overflow:"visible"}),l.length>0&&(s=l.offset().top-32)},beforeActivate:_,create:_});let m=t.location.hash&&i.querySelector('a[href="'+t.location.hash+'"]');if(m&&m.closest(".subtabnav")){const e=m.closest(".maintab").getAttribute("id"),t=i.tfId("maintabnav").querySelector('a[href="#'+e+'"]');t&&t.click()}l.length>0&&t.tfOn("scroll",(function(){$(this).scrollTop()>s?l.hasClass("themify_settings_fixed")||l.addClass("themify_settings_fixed"):l.removeClass("themify_settings_fixed")}),{passive:!0});var u=()=>{var e=$("#search-setting").val();if(e.length<=0)return p(),void $(".subtab","#setting").unmark({done(){$(".searching").removeClass("searching"),$(".contain-result").removeClass("contain-result"),$("#setting").removeClass("not-found")}});e.length&&($(".search-setting-holder .clear-search").hasClass("show")||p()),$(".subtab","#setting").unmark({done(){$(".searching").removeClass("searching"),$(".contain-result").removeClass("contain-result"),$("#setting").removeClass("not-found"),$("*:not(:input):icontains('"+e+"')","#setting .subtab").mark(e,{diacritics:!0,separateWordSearch:!0,exclude:["option",".tm-option-title-fw"],filter(e,t,i,n){if("#text"===e.nodeName){if("none"===$(e).parent().parent().css("display"))return!1}else if("none"===$(e).parent().css("display"))return!1;return!0},each(e){$(e).closest("fieldset").addClass("contain-result"),$(e).closest(".subtab").addClass("contain-result")},done(){$("#setting").addClass("searching")},noMatch(){$("#setting").addClass("not-found")}})}})};function p(){var e=$(".search-setting-holder .clear-search");e.prev().val().length<=0?e.removeClass("show"):e.addClass("show")}function y(){I();var e=c.serialize();$.post(ajaxurl,{action:"themify_save",data:e,nonce:themify_js_vars.nonce},(()=>{R(),$("body").triggerHandler("themify_save")}))}$("#search-setting").on("input",u),$(".search-setting-holder .clear-search").on("click",(function(){$(this).prev().val(""),u()})),$(".valid_num").on("keyup input paste",(function(){(function(e){for(var t,i=" 0123456789.+-",n=!0,a=0;a<e.length&&!0===n;a++)t=e.charAt(a),i.includes(t)||(n=!1);return n})($(this).val())||$(this).val($(this).val().substring(0,$(this).val().length-1))})),$(".save-button").on("click",(e=>(y(),!1))),c.length>0&&$(i).on("keydown",(e=>{83!=e.which||1!=e.ctrlKey&&1!=e.metaKey||(e.preventDefault(),y())})),$("#reset-setting").on("click",(function(e){e.preventDefault();var i="reset-setting"!==$(this).prop("id")?"styling":"settings";confirm(themify_lang["confirm_reset_"+i])&&(I(),$.post(ajaxurl,{action:"themify_reset_"+i,data:c.serialize(),nonce:themify_js_vars.nonce},(()=>{R(),t.location.reload(!0)})))})),(()=>{let e=i.tfId("tf_message"),t=localStorage.getItem("tf_message"),n=localStorage.getItem("tf_message_dismiss"),a=()=>{e.className="show",e.innerHTML=t+" ";let n=i.createElement("a");n.href="#",n.textContent=e.dataset.dismiss,n.tfOn("click",(t=>{t.preventDefault(),e.style.display="none",localStorage.setItem("tf_message_dismiss",1)})),e.appendChild(n)};e&&!n&&(null===t?$.ajax({url:"https://themify.org/public-api/update-message/index.txt",success(e){t=e,localStorage.setItem("tf_message",t),""!==t.trim()&&a()}}):""!==t&&a())})(),$(".themify_changelogs").on("click",(function(e){e.preventDefault();var t=$(this).data("changelog"),n=i.tfClass("overlay")[0],a=i.tfClass("prompt-box")[0];$(".show-login, .show-error").hide(),$(n).add(a).fadeIn(300),a.querySelector("iframe")?.remove(),$(".tb_alert").addClass("busy").fadeIn(300),$('<iframe src="'+t+'" />').on("load",(()=>{$(".tb_alert").removeClass("busy").fadeOut(300)})).prependTo(".prompt-box"),a.classList.add("show-changelog"),n.addEventListener("click",(()=>{$(n).add(a).fadeOut(500)}),{once:!0,passive:!0})})),$(".feature-box-display").on("click",(function(){"images"===$(this).val()?$(this).parent().parent().find(".feature_box_posts").fadeOut(200,(function(){$(this).parent().parent().find(".feature_box_images").fadeIn(200)})):$(this).parent().parent().find(".feature_box_images").fadeOut(200,(function(){$(this).parent().parent().find(".feature_box_posts").fadeIn(200)}))})),$(".block-toggle").on("click",(function(){var e=$(this),t=e.val(),i=e.data("hide");e.parent().parent().find(".feature_box_"+i).fadeOut(200,(()=>{e.parent().parent().find(".feature_box_"+t).fadeIn(200)}))})),$(".feature_box_enabled_check").on("change",(function(){"on"===$(this).val()?$(this).closest("fieldset").find(".feature_box_enabled_display").fadeIn(200):$(this).closest("fieldset").find(".feature_box_enabled_display").fadeOut(200)}));var g=$(".box_enabled_check");g.on("click",(function(){$(this).is(":checked")?$(this).parent().find(".box_enabled_display").fadeIn(200):$(this).parent().find(".box_enabled_display").fadeOut(200)})),g.is(":checked")&&g.parent().find(".box_enabled_display").show();var b=$(".disable_img_php");b.on("click",(()=>{b.is(":checked")?($(".show_if_disabled_img_php").fadeIn(200),$(".show_if_enabled_img_php").fadeOut(200)):($(".show_if_disabled_img_php").fadeOut(200),$(".show_if_enabled_img_php").fadeIn(200))})),b.is(":checked")?$(".show_if_disabled_img_php").show():b.not(":checked")&&$(".show_if_enabled_img_php").show(),$(".gallery_lightbox_type").on("change",(()=>{1!=$(".gallery_lightbox_type").prop("selectedIndex")?$(".show_if_photoswipe_enabled").fadeOut(200):$(".show_if_photoswipe_enabled").fadeIn(200)})).trigger("change"),$("#skins .skin-preview").on("click",(function(e){"INPUT"!==e.target.nodeName&&"LABEL"!==e.target.nodeName&&($(e.target).parent().hasClass("view-demo")||e.preventDefault(),$("#skins .skin-preview").removeClass("selected"),$(this).addClass("selected"),$("input[name='skin']").val($(this).attr("data-skin")))}));var v=$(".featimgcontrol");v.length>0&&$(".featimgdropdown").length>0&&v.each((function(){$(this).append($(this).next(".featimgdropdown"))}));var k=$("#social-link-type"),w=$("#social-links-wrapper"),x=$("#setting-link_field_ids"),j=$("#setting-link_field_hash");$('input[value="font-icon"]',k).prop("checked")?($(".image-icon",w).fadeOut(),$(".font-icon",w).fadeIn()):($(".font-icon",w).fadeOut(),$(".image-icon",w).fadeIn()),$("input",k).on("click",(function(){var e=$(this);e.prop("checked")&&($("."+e.data("hide"),w).fadeOut(),$("."+e.val(),w).fadeIn())})),w.length&&w.sortable({placeholder:"social-link-placeholder",handle:".social-drag",update(){var e={};$(".social-link-item").each((function(){e[$(this).attr("id")]=$(this).attr("id")})),x.val(JSON.stringify(e))}}).on("click",".remove-item",(function(e){e.preventDefault();var t=JSON.parse(x.val()),i=$(this).data("removelink");$("#"+i).remove(),delete t[i],x.val(JSON.stringify(t))})),$(".add-social-link a").on("click",(n=>{const a=JSON.parse(x.val()),s=j.val(),o=parseInt(s),c=k[0].querySelector("input[value=font-icon]:checked")?"font-icon":"image-icon";n.preventDefault(),e.fetch({action:"themify_add_link_field",nonce:themify_js_vars.nonce,fid:o,type:c},"html").then((e=>{i.tfId("social-links-wrapper").appendChild(e);const n=i.tfId("themify-link-"+s),c=n.tfClass("plupload-upload-uic")[0];a["themify-link-"+s]="themify-link-"+s,x.val(JSON.stringify(a)),c&&themify_create_pluploader($(c)),t.Themify_Metabox.color_picker($(n)),j.val(o+1)}))})),$(".slug-rewrite").each((function(){$(this).on("keypress",(e=>{if(!RegExp("^[a-z0-9_-]+$").test(String.fromCharCode(e.charCode?e.charCode:e.which)))return e.preventDefault(),!1}))}));var S={target:"",currentValues:"",lightboxEl:null,overlayEl:null,getDocHeight(){var e=i;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))},update_inputs(e){e||(e=this.lightboxEl);const t=e.querySelectorAll('input[type="checkbox"]');for(let e=0;e<t.length;e++)t[e].checked=this.currentValues.includes(t[e].name+"=on")},showLightbox(){const e=$(i).scrollTop()+80;this.lightboxEl||(I(),$.ajax({type:"POST",url:ajaxurl,async:!1,data:{action:"themify_get_visibility_options",nonce:themify_js_vars.nonce},success(e){R("done");const t=document.createElement("template");t.innerHTML=e,document.body.appendChild(t.content)}}),this.lightboxEl=document.getElementById("themify_lightbox_visibility"),this.overlayEl=document.getElementById("themify_lightbox_overlay"),$("#visibility-tabs",this.lightboxEl).tabs(),$("#visibility-tabs .themify-visibility-inner-tabs",this.lightboxEl).tabs()),this.update_inputs(),this.overlayEl.style.display="block",$(this.lightboxEl).show().css("top",this.getDocHeight()).animate({top:e},800)},closeLightbox(){const e=this;$(e.lightboxEl).animate({top:e.getDocHeight()},800,(()=>{e.overlayEl.style.display="none",e.lightboxEl.style.display="none",e.currentValues="",e.update_inputs()}))}};o.on("click",".themify-visibility-toggle",(function(){return S.target=this.nextElementSibling,S.currentValues=decodeURIComponent(this.nextElementSibling.value),S.showLightbox(),!1})).on("click",".themify_lightbox_visibility .close_lightbox, #themify_lightbox_overlay",(()=>(S.closeLightbox(),!1))),o.on("mouseover",".tb_hook_conditions li",(function(){if(this.getElementsByClassName("remove-item")[0])return;const e=document.createElement("a"),t=document.createElement("span");e.className="remove-item",t.className="tf_close",e.appendChild(t),this.appendChild(e)})).on("click",".themify-visibility-pagination a.page-numbers",(function(e){e.preventDefault();const t=parseInt(this.getAttribute("href")),i=this.closest(".themify-visibility-items-inner"),n=i.getElementsByClassName("themify-visibility-items-page");i.getElementsByClassName("themify-visibility-items-page-"+t)[0]||$.ajax({url:ajaxurl,async:!1,type:"post",data:{action:"themify_create_inner_page",type:(this.closest(".themify-visibility-inner-tab")?this.closest(".themify-visibility-inner-tabs"):S.lightboxEl).querySelector(".ui-tabs-active a").dataset.type,paged:t,nonce:themify_js_vars.nonce},beforeSend(){I()},success(e){R("done");const t=document.createElement("template");t.innerHTML=e,S.update_inputs(t.content),i.appendChild(t.content)}});for(let e=0;e<n.length;e++)n[e].style.display=n[e].classList.contains("themify-visibility-items-page-"+t)?"block":"none"})).on("click","#visibility-tabs .themify_hc_load_ajax, #visibility-tabs .inline-tabs a",(function(e){let t=this.dataset.type,i=S.lightboxEl.querySelector(this.getAttribute("href"));t?i.getElementsByClassName("themify-visibility-items-page-1")[0]||$.ajax({url:ajaxurl,type:"post",data:{action:"themify_create_inner_page",nonce:themify_js_vars.nonce,type:t},beforeSend(){I()},success(e){R("done"),i.firstElementChild.innerHTML=e,S.update_inputs(i)}}):i.querySelector(".inline-tabs .ui-tabs-active a").click()})).on("change",'#themify_lightbox_visibility input[type="checkbox"]',(function(){this.checked?S.currentValues+="&"+this.name+"=on":S.currentValues=S.currentValues.replace(this.name+"=on","")})).on("click",".visibility-save",(()=>{S.target.value=S.currentValues;const t=S.target.previousElementSibling.dataset.item;return e.fetch({action:"themify_hc_conditions",nonce:themify_js_vars.nonce,selected:S.currentValues},"html").then((e=>{$('#hook-content-list li[data-id="'+t+'"] .tb_hook_conditions').replaceWith(e)})),S.closeLightbox(),!1})).on("click",".themify_lightbox_visibility .uncheck-all",(()=>(S.currentValues="",S.update_inputs(),!1))),$("#setting-hooks").on("click",".remove-item",(function(e){if(e.preventDefault(),this.closest(".tb_hook_conditions")){const e=this.closest(".social-link-item").querySelector('input[type="hidden"]'),t=this.closest("li");e.value=decodeURIComponent(e.value).replace(t.dataset.id+"=on",""),t.remove()}else{const e=JSON.parse($("#themify-hooks-field-ids").val()),t=$(this).closest(".social-link-item").fadeOut("fast",(()=>{const i=t.attr("data-id");for(let t in e)e.hasOwnProperty(t)&&e[t]==i&&e.splice(t,1);$("#themify-hooks-field-ids").val(JSON.stringify(e)),$(".themify-admin-lightbox-"+i).removeClass("is-loaded").find(".lightbox_container").html("")}))}})).on("click",".themify-add-hook a",(function(e){e.preventDefault(),$(this).before('<span class="tb_slider_loader_wrapper"><span class="tb_slider_loader"></span></span>');let t=JSON.parse($("#themify-hooks-field-ids").val()),i=1;t.length>0?(t=t.filter(Number),i=Math.max.apply(null,t)+1):t=[],$.ajax({url:ajaxurl,type:"post",data:{action:"themify_hooks_add_item",field_id:i,nonce:themify_js_vars.nonce},success(e){const n=$("#hook-content-list");t.push(i),$("#themify-hooks-field-ids").val(JSON.stringify(t)),$("#setting-hooks .tb_slider_loader_wrapper").remove(),n.append(e),$("textarea[name=setting-hooks-"+i+"-code]",n).html(""),$("select[name=setting-hooks-"+i+"-location] optgroup:first-child option[value=themify_body_start]",n).attr("selected",!0),n.find("li").length>1&&$(".themify-admin-lightbox:first").clone().removeClass("themify-admin-lightbox-1").addClass("themify-admin-lightbox-"+i).data("item",i).insertAfter(".themify-admin-lightbox:last"),$(".lightbox_container",".themify-admin-lightbox-"+i).html(""),$("#setting-hooks-"+i+"-visibility",n).val(""),$(".themify-admin-lightbox:last").removeClass("is-loaded"),n.find('li[data-id="'+i+'"] .tf_hook_repeat').hide()}})}));const T=$("#hook-content-list");T.length&&T.sortable({placeholder:"social-link-placeholder",handle:".social-drag",update(){var e=[];T.find("li").each((function(){e.push(parseInt($(this).attr("data-id")))})),$("#themify-hooks-field-ids").val(JSON.stringify(e))}}),$("body").on("click",".see-hook-locations",(function(e){e.preventDefault(),t.tf_hook_target=this.closest("li").querySelector("select"),$.magnificPopup.open({items:[this],type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler" style="max-width: 100% !important; height: 100%;"><div role="button" class="tf_close mfp-close"></div><iframe id="tf_hook_location_iframe" class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>'}})})).on("change",".tf_hook_location",(function(){this.closest("li").querySelector(".wp_head_notice").style.display="wp_head"===this.value?"block":"none";let e=$("option:selected",this).closest("optgroup").data("key");$(this).closest("li").find(".tf_hook_repeat").toggle("layout"!==e&&"general"!==e&&"ecommerce"!==e).find("span").eq(0).toggle("post_content"!==e).end().eq(1).toggle("post_content"===e)})).find(".tf_hook_location").each((function(){$(this).trigger("change")})),$("#setting-editor-gfonts-list").on("change",(function(){$(this).next().val(JSON.stringify($(this).val()))})).trigger("change"),o.on("click","#demo-import-notice .skin-preview",(function(e){$(e.target).parent().hasClass("view-demo")||e.preventDefault(),$("#demo-import-notice .skin-preview").removeClass("selected"),$(this).addClass("selected"),$('#skins .skin-preview[data-skin="'+$(this).data("skin")+'"]').trigger("click")})),$(".themify-modal .dismiss-import-notice").on("click",(function(){return $(this).closest(".themify-modal").fadeOut(),function(e="open"){i.body.classList.toggle("themify-modal-active","open"===e)}("close"),!1})),function(e){var t=e.find("[data-show-if-element]").map((function(){return $(this).data("show-if-element")})).get().filter(((e,t,i)=>t===i.indexOf(e)));$.each(t,((e,t)=>{var n=t;J(n),$(i).on("change",n,(e=>{J(n)}))}))}($("#themify, .toplevel_page_themify-builder #wpbody-content")),$(".js-clear-cache").on("click",(function(t){t.preventDefault();const i=$(this);i.hasClass("disabled")||(i.addClass("disabled").find("span").text(i.data("clearing-text")).end().find("i").removeClass().addClass("tf_loader"),e.fetch({action:this.dataset.action,data:"all"===this.dataset.send?c.serialize():"",nonce:themify_js_vars.nonce}).then((e=>{e&&e.error&&alert(e.error),i.find("span").text(i.data("done-text")).end().find("i").removeClass(),setTimeout(e&&e.remove_after?()=>{i.closest(".pushlabel").remove()}:()=>{i.find("span").text(i.data("default-text")).end().find("i").removeClass().addClass(i.data("default-icon")).end()},3e3)})).finally((()=>{i.removeClass("disabled")})))})),$(".input-range .range-slider").each((function(){let e=$(this),t=e.next(),i=!!t.data("range");e.slider({range:i,min:t.data("min"),max:t.data("max"),values:t.val().split("-"),slide(e,n){t.val(n.values[0]!=n.values[1]&&i?n.values[0]+"-"+n.values[1]:n.values[0])}}),t.on("keyup",(function(){const t=$(this),i=parseInt(t.val());i<parseInt(t.data("default-min"))&&e.slider("option","min",i),i>parseInt(t.data("default-max"))&&e.slider("option","max",i),e.slider("values",[i])}))})),function(){i.tfId("builder-regenerate-css-files")?.tfOn("click",(async n=>{const a=n.currentTarget,s=a.value;if(!a.disabled){a.value="Regenerating ...",a.disabled=!0,await e.loadJs(e.url+"js/admin/notification",!!t.TF_Notification),TF_Notification.show("info","Regenerating ...");try{const t=await e.fetch({nonce:themify_js_vars.nonce,action:"themify_regenerate_css_files_ajax",all:i.querySelector("#tmp_regenerate_all_css:checked")?1:0});if(!t.success)throw t;await TF_Notification.showHide("done","Done",1500)}catch(n){const e=n.data?n.data:n;await TF_Notification.showHide("error",e)}a.value=s,a.disabled=!1}}),{passive:!0})}(),function(){$("#builder-find-and-replace-btn").on("click",(async n=>{const a=n.currentTarget.classList;if(!a.contains("disabled")){if(a.add("disabled"),""===$("#original_string").val())alert("Please fill original value for search!");else if(confirm("WARNING: This will replace all data in your database. It can not be undone. Please backup your database before proceeding."))try{await async function(){e.loadJs(e.url+"js/admin/notification",!!t.TF_Notification);const n=i.tfId("original_string").value.trim(),a=i.tfId("replace_string").value.trim();return await e.loadJs(e.url+"js/admin/modules/find-replace",!!t.TF_Replace),TF_Replace(n,a,themify_js_vars.nonce)}()}catch(n){}a.remove("disabled")}}))}(),function(){i.tfId("setting-page_builder_maintenance_page")?.tfOn("mousedown",(function(e){var t=this;$.ajax({url:ajaxurl,type:"POST",data:{action:"themify_load_maintenance_pages",nonce:themify_js_vars.nonce},success(i){t.innerHTML=i,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(t.blur(),t.dispatchEvent(e))}})}),{once:!0,passive:!0})}();const N=i.tfId("tf_font_import_notice"),O=i.tfId("tf_font_size_slider_wrap");if(N&&$(N).insertAfter(".wp-header-end"),O){$("#tf_font_size_slider_wrap").appendTo("th#font_preview");let e=i.tfId("tf_font_preview_style"),t=localStorage.getItem("tf_font_preview_size")||1,n=t=>{e.innerText=".font_preview span { font-size: "+t+"em; }"};n(t),$("#tf_font_size_slider").slider({value:t,min:.5,max:4,step:.1,slide(e,t){n(t.value),localStorage.setItem("tf_font_preview_size",t.value)}})}let F=i.tfClass("generate-child-theme");for(let e=0;e<F.length;e++)F[e].tfOn("click",(t=>{t.preventDefault(),confirm(F[e].dataset.confirm)&&(I(),$.ajax({url:ajaxurl,type:"POST",data:{action:"themify_generate_child_theme",nonce:themify_js_vars.nonce,import_customizer:F[e].closest("div").querySelector('input[type="checkbox"]').checked?1:0},success(t){R(),t.success?(F[e].classList.add("disabled"),F[e].closest(".tf_generate_child_theme").classList.add("tf_done")):alert(t.data[0].message)}}))}));function J(e){$('[data-show-if-element="'+e+'"]').each((function(){var e=$(this),t=e.data("show-if-value"),i=$(""+e.data("show-if-element")),n="";i.length<=0||(n=i.is(":checkbox")?i.is(":checked")?"true":"false":i.is(":radio")?i.filter(":checked").val():i.val().trim(),t=Array.isArray(t)?t:[""+t],void 0!==n&&-1!==$.inArray(n,t)?e.slideDown({duration:200}):e.slideUp({duration:200}))}))}async function z(i){try{await e.loadJs(e.url+"js/admin/modules/codemirror/codemirror",!!t.ThemifyCodeMiror);const n=new ThemifyCodeMiror(i,"htmlmixed");await n.run()}catch(e){}}function I(){const e=i.tfClass("tb_alert")[0];e&&!e.classList.contains("busy")&&(e.classList.add("busy"),$(e).fadeIn(800))}function R(e){const t=$(".tb_alert").removeClass("busy");if("error"===e)e="error";else{if("hide"===e)return t[0].style.display="none",void setTimeout((()=>{t[0].style.display=""}),200);e="done"}t.addClass(e).delay(800).fadeOut(800,(function(){$(this).removeClass(e)}))}$((function(){$("#themify .preview-icon").each((function(){var e=$(this),t=e.attr("title");e.removeAttr("title").append('<span class="tm-option-title-fw">'+t+"</span>")}))})),$("#themify_feed_settings select").on("change",(function(){$(this).next().val($(this).val().join(","))})),e.on("themify_erase_content",(async function n(a){I(),await e.loadJs(e.url+"js/admin/notification",!!t.TF_Notification),await TF_Notification.show("info",themify_js_vars.erase.processing);try{const t=await e.fetch({action:"themify_erase_content",nonce:themify_js_vars.nonce,data:{keep_modify:a?1:0}});if(!t.success)throw"error";if("repeat"===t.data)await n(a);else if(R("done"),await TF_Notification.showHide("done",themify_js_vars.erase.done,2e3),"hasdemo"!==t.data)for(let e=i.tfClass("skin-erase-link"),t=e.length-1;t>-1;--t)e[t].parentNode.tfClass("tf_erase_box")[0].remove(),e[t].remove()}catch(e){const t="string"==typeof e?e:"";throw await TF_Notification.showHide("error",themify_js_vars.erase.error.replace("%error%",t),4e3),e}})),i.tfOn("click",(async n=>{const a=n.target?.closest(".license-link,.themify-ajax-installer,.update-license.themify_button,.skin-demo-import,.skin-erase-demo,.import-sample-content,.erase-sample-content");if(a){n.preventDefault();const s=a.classList;try{if(!s.contains("disabled")){s.add("disabled"),e.loadJs(e.url+"js/admin/notification",!!t.TF_Notification);const n=e.url+"js/admin/modules/";if(s.contains("license-link")||s.contains("update-license"))await e.loadJs(n+"license",!!t.TF_License),s.contains("update-license")?(I(),await TF_License.update(),"undefined"!=typeof ThemifyUpdater&&ThemifyUpdater.updateThemeBtn(),R("done"),void 0===i.tfClass("required-addons")[0]&&setTimeout((()=>{t.location.reload()}),100)):TF_License.init();else if(s.contains("erase-sample-content")||s.contains("skin-erase-demo")){let t=a.closest(".tf_erase_box");t&&(t=t.querySelector(".tf_modify_demo:checked")),await e.trigger("themify_erase_content",!!t)}else if(s.contains("themify-ajax-installer"))I(),await e.loadJs(e.url+"js/admin/modules/install-updater",!!t.TF_Install_Updater),await TF_Install_Updater(themify_js_vars.nonce),R("done"),setTimeout((()=>{t.location.reload()}),100);else if(s.contains("skin-demo-import")||s.contains("import-sample-content")){I(),await e.loadJs(n+"skin",!!t.TF_Skin);const s={};null===i.tfId("license-modal")&&(s.license=1),a.dataset.plugins&&(s.plugins=a.dataset.plugins),a.dataset.id&&(s.skin=a.dataset.id);R("open"===await TF_Skin.init(s)?"hide":"done")}}}catch(n){R("error")}finally{s.remove("disabled")}}}));const L=i.tfId("tf_import_settings"),E=i.tfId("tf_export_settings");L&&(L.tfOn("click",(async function(i){if(i.preventDefault(),!confirm(this.dataset.msgConfirm))return;await e.loadJs(e.url+"js/admin/notification",!!t.TF_Notification);const n=this,s=document.createElement("input");s.type="file",s.accept=".zip,.txt",s.tfOn("change",(async i=>{TF_Notification.show("info",n.dataset.msgImporting),i.currentTarget.remove();try{const s=i.currentTarget.files[0],o=i=>{e.fetch({action:"themify_import_settings",_ajax_nonce:n.dataset.nonce,data:i}).then((e=>{if(!e.success)throw Error(n.dataset.msgError);t.location.reload()}))};if("text/plain"===s.type){(new FileReader).tfOn("loadend",(function(e){try{this.readyState===FileReader.DONE&&o(e.target.result)}catch(e){}}),{passive:!0,once:!0}).readAsText(s)}else{if("application/x-zip-compressed"!==s.type&&"application/zip"!==s.type)throw Error(n.dataset.msgInvalid);{await a();const e=new JSZip,t=await e.loadAsync(s),i=t.files;if(!i)throw Error(n.dataset.msgInvalid);if(!i["data_export.txt"])throw Error(n.dataset.msgInvalid);{const e=await t.file("data_export.txt").async("text");o(e)}}}}catch(i){TF_Notification.showHide("error",i.message)}}),{passive:!0,once:!0}).click()})),E.tfOn("click",(async e=>{e.preventDefault();const t={},i=(e,t)=>{let i=document.createElement("a");i.download=e,i.rel="noopener",i.href=URL.createObjectURL(t),setTimeout((()=>{URL.revokeObjectURL(i.href),i=null}),7e3),i.click()};c.serializeArray().forEach((e=>{""!==e.value&&"default"!==e.value&&(t[e.name]=e.value)}));try{await a();const e=new JSZip;e.file("data_export.txt",JSON.stringify(t)),i(E.dataset.filename,await e.generateAsync({type:"blob"}))}catch(e){i(E.dataset.filename+".txt",new Blob([JSON.stringify(t)],{type:"text/plain"}))}})))}))})(Themify,jQuery,window,document);