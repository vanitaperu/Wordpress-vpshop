((t,i,a,s)=>{"use strict";const e=t.click,_=/iPhone|iPad|iPod|Mac OS/i.test(window.navigator.userAgent),f=t=>{const i=new Date(1e3*(t=1/0===t?0:t)).toISOString().substr(11,8).split(":");return"00"===i[0]&&i.splice(0,1),i.join(":")},l=(a,_)=>{const l=a.tracks,n=!!a.artists,o=!!a.images,p=!!a.tracknumbers,u=i.createElement("div"),d=i.createElement("div"),c=i.createDocumentFragment();d.className="tf_audio_playlist",u.className="tf_playlist_current";let r=!0;for(let t=0;t<l.length;++t)if(l[t].src){let a=l[t],s=i.createElement("div"),e=i.createElement("div"),_=i.createElement("a"),o=i.createElement("span"),u=new Audio(a.src.trim());if(!a.type||u.canPlayType(a.type)){if(s.className="tf_playlist_item tf_w tf_rel",_.href=a.src.trim(),_.className="tf_playlist_caption tf_w",e.className="tf_playlist_length",!isNaN(u.duration)||a.meta?.length_formatted?(e.textContent=isNaN(u.duration)?a.meta.length_formatted:f(u.duration),u=null):(s.className+=" tf_lazy",u.tfOn("durationchange",(function(){e.textContent=f(this.duration),u=null,s.classList.remove("tf_lazy")}),{passive:!0,once:!0})),!0===p&&(_.textContent=t+1+"."),o.className="tf_playlist_title",a.caption?o.textContent=a.caption:a.title&&(o.textContent=a.title),!0===n&&a.meta?.artists){let t=i.createElement("span");t.className="tf_playlist_artist",t.textContent="-"+a.meta.artists,_.appendChild(t)}_.appendChild(o),s.append(_,e),c.appendChild(s)}else l.splice(t,1)}else l.splice(t,1);return d.tfOn(e,(function(a){const e=a.target.closest(".tf_playlist_caption"),f=e.parentNode.classList.contains("tf_audio_current");if(e){if(a.preventDefault(),a.stopPropagation(),!f||_.paused)if(f)_.play();else{const a=this.tfClass("tf_audio_current")[0],f=t.convert(this.children).indexOf(e.parentNode),p=i.createElement("div"),d=i.createElement("span"),c=l[f];if(p.className="tf_playlist_caption",d.className="tf_playlist_title",!1===r&&(_.pause(),_.tfOn("canplay",(function(){this.play()}),{passive:!0,once:!0}).src=e.getAttribute("href"),_.load()),a?.classList.remove("tf_audio_current"),e.parentNode.classList.add("tf_audio_current"),u.innerHTML="",c){if(o&&c.thumb&&c.thumb.src){const t=new Image,a=i.createElement("div");c.thumb.width!==s&&(t.width=c.thumb.width),c.thumb.height!==s&&(t.height=c.thumb.height),t.decoding="async",t.src=c.thumb.src,a.className="post-image",a.appendChild(t),u.appendChild(a)}if(d.textContent=c.title??c.caption??"",p.appendChild(d),l.meta){if(l.meta.album){const t=i.createElement("span");t.className=" tf_playlist_album",t.textContent=l.meta.album,p.appendChild(t)}if(n&&l.meta.artists){const t=i.createElement("span");t.className=" tf_playlist_artist",t.textContent=l.meta.artists,p.appendChild(t)}}u.appendChild(p)}}r=!1}})),d.appendChild(c),_.before(u),t.triggerEvent(d.tfClass("tf_playlist_caption")[0],e),d},n=async(t,i)=>{if(t.paused){t.dataset.playing||(t.dataset.playing=1);try{await t.play()}catch(t){if(i)throw t}}},o=(s,o)=>{if(s.previousElementSibling?.classList.contains("tf_audio_container"))return;const p=i.createElement("div"),u=i.createElement("div"),d=i.createElement("div"),c=i.createElement("div"),r=i.createElement("div"),v=i.createElement("div"),y=i.createElement("input"),h=i.createElement("input"),m=i.createElement("div"),b=i.createElement("div"),w=i.createElement("div"),g=i.createElement("button"),N=i.createElement("button"),k=i.createElement("div"),x=s.parentNode.closest(".track"),z=i.createElement("div"),P=o&&o.tracks;let X=!0,q=!1;if(p.className="tf_audio_container tf_w tf_rel tf_box",u.className="tf_audio_wrap tf_w tf_rel tf_box",w.className="tf_audio_controls",d.className="tf_audio_progress_wrap tf_rel tf_textl",c.className="tf_audio_progress_loaded tf_w tf_h tf_abs",r.className="tf_audio_progress_current tf_w tf_h tf_abs",y.className="tf_audio_progress_range tf_h tf_abs",h.min=y.min=0,h.max=y.max=100,h.type=y.type="range",y.value=0,h.value="50%",m.className="tf_audio_volumn_wrap",b.className="tf_audio_volumn_inner",h.className="tf_audio_volumn_range tf_h tf_overflow",g.className="tf_audio_mute",N.className="tf_auido_play",N.tabIndex=g.tabIndex=0,N.type=g.type="button",s.muted&&(g.className+=" tf_muted"),k.className="tf_audio_current_time",z.className="tf_audio_total_time",v.className="tf_audio_hover tf_abs tf_hide tf_box tf_textc",k.textContent=f(s.currentTime),z.textContent=f(s.duration),N.tfOn(e,(t=>{"click"===t.type&&(t.preventDefault(),t.stopPropagation()),s.paused?n(s):s.pause()}),{passive:"click"!==e}),x?.tfClass("track-title")[0]?.tfOn(e,(i=>{i.preventDefault(),t.triggerEvent(N,e)})),g.tfOn(e,(t=>{"click"===t.type&&(t.preventDefault(),t.stopPropagation()),s.muted=!s.muted}),{passive:"click"!==e}),t.isTouch||d.tfOn("mouseenter",(function(){if(!isNaN(s.duration)){v.classList.remove("tf_hide");const i=this.clientWidth,e=a(v.clientWidth/2),_=s.duration,l=s=>{const l=s.layerX??s.offsetX,n=t.isRTL?l+e:l-e;n>0&&l>=0&&l<=i&&(v.style.transform="translateX("+n+"px)",!1===q&&(v.textContent=f(a(l/i)*_)))};this.tfOn("mouseleave",(function(){v.classList.add("tf_hide"),this.tfOff("mousemove",l,{passive:!0})}),{passive:!0,once:!0}).tfOn("mousemove",l,{passive:!0})}}),{passive:!0}),y.tfOn("input",(function(t){if(t.preventDefault(),t.stopPropagation(),!isNaN(s.duration)){s.paused||!0!==X||s.pause(),q=!0;const t=parseInt(this.value);s.currentTime=100===t?s.duration-1:a(t*s.duration/100).toFixed(4)}})).tfOn("change",(t=>{t.preventDefault(),t.stopPropagation(),isNaN(s.duration)||(q=X=!1,s.paused&&s.play().catch({}).finally((()=>{X=!0})))})),s.tfOn("progress",(function(){this.buffered.length>0&&(c.style.transform="scaleX("+a(this.buffered.end(0)/this.duration).toFixed(4)+")")}),{passive:!0}).tfOn("durationchange",(function(){z.textContent=f(this.duration)}),{passive:!0}).tfOn("waiting emptied",(function(){d.classList.add("tf_audio_waiting"),this.tfOn("playing",(()=>{d.classList.remove("tf_audio_waiting")}),{passive:!0,once:!0})}),{passive:!0}).tfOn("pause",(()=>{N.classList.remove("tf_audio_playing")}),{passive:!0}).tfOn("play",(function(){N.classList.add("tf_audio_playing");for(let t=i.tfTag("audio"),a=t.length-1;a>-1;--a)t[a]!==this&&t[a].pause()}),{passive:!0}).tfOn("timeupdate",(function(){if(!isNaN(this.duration)){k.textContent=f(this.currentTime);let t=a(this.currentTime/this.duration);r.style.transform="scaleX("+t.toFixed(4)+")",!1===q&&(y.value=~~(100*t))}}),{passive:!0}).tfOn("volumechange",(function(){const t=g.classList;0!==this.volume&&t.remove("tf_mute_disabled"),!0===this.muted||0===this.volume?(0===this.volume&&t.add("tf_mute_disabled"),t.add("tf_muted")):t.remove("tf_muted")}),{passive:!0}),d.append(c,r,y,v),m.appendChild(g),!1===_&&(h.tfOn("input",(function(t){t.preventDefault(),t.stopPropagation(),s.volume=a(this.value/100).toFixed(3)})),b.appendChild(h),m.appendChild(b)),u.append(w,k,d,z,m),p.appendChild(u),P){const a=p.appendChild(l(o,s)),_=i.createElement("button"),f=i.createElement("button");_.className="tf_playlist_prev tf_play_disabled",f.className="tf_playlist_next",a.children.length<=1&&(f.className+=" tf_play_disabled"),_.tabIndex=f.tabIndex=0,_.type=f.type="button",w.tfOn(e,(i=>{const s=i.target.classList;if(!s.contains("tf_play_disabled")&&(s.contains("tf_playlist_prev")||s.contains("tf_playlist_next"))){"click"===i.type&&(i.preventDefault(),i.stopPropagation());const l=a.tfClass("tf_audio_current")[0];if(l){const i=s.contains("tf_playlist_prev")?l.previousElementSibling:l.nextElementSibling;i&&(t.triggerEvent(i.tfClass("tf_playlist_caption")[0],e),s.contains("tf_playlist_prev")?(f.classList.remove("tf_play_disabled"),s.toggle("tf_play_disabled",!i.previousElementSibling)):(_.classList.remove("tf_play_disabled"),s.toggle("tf_play_disabled",!i.nextElementSibling)))}}}),{passive:"click"!==e}),s.tfOn("ended",(function(){if(f.classList.contains("tf_play_disabled")){if(this.hasAttribute("data-loop")||this.hasAttribute("loop")){const i=a.tfClass("tf_playlist_caption")[0];i&&(_.classList.add("tf_play_disabled"),f.classList.toggle("tf_play_disabled",a.children.length<=1),t.triggerEvent(i,e))}}else t.triggerEvent(f,e)}),{passive:!0}),w.append(_,N,f)}else w.appendChild(N);requestAnimationFrame((()=>{s.parentNode.classList.remove("tf_lazy"),s.before(p),s.closest(".tf_lazy")?.classList.remove("tf_lazy"),s.dataset.autoplay&&n(s)}))},p=(i,a)=>{for(let s=i.length-1;s>-1;--s){let e=i[s];if(!a){let t=e.parentNode.parentNode;if(t.classList.contains("wp-audio-playlist")){let i=t.tfClass("tf-playlist-script")[0]||t.tfClass("wp-playlist-script")[0];i&&"audio"!==(a=JSON.parse(i.textContent)).type&&(a=!1)}}if(!e.hasAttribute("src")&&!e.tfTag("source")[0]){if(!a?.tracks)continue;let t;for(let i=0;i<a.tracks.length;++i)if(t=a.tracks[i].src,t)break;if(!t)continue;e.src=t}4===e.readyState?o(e,a):t.requestIdleCallback((()=>{e.tfOn("loadedmetadata",(function(){o(this,a)}),{passive:!0,once:!0}).load()}),-1,200)}};t.on("tf_audio_init",((t,i)=>{queueMicrotask((()=>{setTimeout((()=>{p(t,i)}),0)}))}))})(Themify,document,parseFloat,void 0);